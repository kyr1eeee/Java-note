## 字符集

计算机中采用0 1 来存储数据信息。将不同的字符根据一定规则映射成0 1 组成的序列，也就是编码的大致意思。反过来，将 0 1 组成的序列映射回相应的字符，就是解码的流程。

#### ASCII

最早的计算机在设计时采用8个比特（bit）作为一个字节（byte），所以，一个字节能表示的最大的整数就是255（二进制11111111=十进制255），0 - 255被用来表示大小写英文字母、数字和一些符号，这个编码表被称为ASCII编码，比如大写字母A的编码是65，小写字母z的编码是122。

#### unicode

Unicode编码定义了这个世界上几乎所有字符（就是你眼睛看的字符比如ABC，汉字等）的数字表示，而且Unicode还兼容了很多老版本的编码规范,比如ASCII。Unicode为每个字符发了一张身份证，这张“身份证”上有一串唯一的数字ID确定了这个字符。这串数字在整个计算机的世界具有唯一性，Unicode给这串数字ID起了个名字叫［码点］。Unicode ,它是 21 位的。这 21 位提供了 1,114,112 个码点,编码空间就是对应这1,114,112 个码点。这么多码点并不代表有这么多字符，目前大概只有10%的空间被使用了，人类社会还没创造出1,114,112 这么多的字符。

#### 编码空间

编码空间被分成 17 个平面（plane），每个平面有 65,536 个字符（正好填充2个字节，16位）。0 号平面叫做「基本多文种平面」（ BMP, Basic Multilingual Plane ），涵盖了几乎所有你能遇到的字符，除了 emoji（emoji位于1号平面 - -）。其它平面叫做补充平面，大多是空的。



unicode transformation formats(UTF) 也就是unicode码点转换格式。

［码点］经过映射后得到的二进制串的转换格式单位称之为［码元］（Code Unit）。［码点］就是一串二进制数，【码元】就是切分这个二进制数的方法。

#### UTF-32

UTF-32也就是说它的码元是32位，每32位去读一下码点，而码点是Unicode给字符的编码，前面也说了，最长才21位，因此每一个 UTF-32 值都可以直接表示对应的码点。

但是UTF-32太费空间

#### UTF-16

UTF-16也就是说它的码元是16位，BMP平面（也就是前面说的基本多文种平面）中的每一个码点都直接与一个UTF-16 的码元一一映射。由于BMP 几乎包括了所有常见字符，UTF-16 一般需要 UTF-32大约 一半的空间。至于其它平面里很少使用的码点都是用两个 16 位的码元来编码的。

#### UTF-8

UTF-8 使用一到四个字节来编码一个码点。从 0 到 127 的这些码点直接映射成 1 个字节（对于只包含这个范围字符的文本来说，这一点使得 UTF-8 和 ASCII 完全相同）。接下来的 1,920 个码点映射成 2 个字节，在 BMP 里所有剩下的码点需要 3 个字节。Unicode 的其他平面里的码点则需要 4 个字节。

| Unicode 十六进制码点范围 | UTF-8 二进制                        |
| ------------------------ | ----------------------------------- |
| 0000 0000-0000 007F      | 0xxxxxxx                            |
| 0000 0080-0000 07FF      | 110xxxxx 10xxxxxx                   |
| 0000 0800-0000 FFFF      | 1110xxxx 10xxxxxx 10xxxxxx          |
| 0001 0000-0010 FFFF      | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx |

如上表所示，对于只需要1个字节的字符，UTF-8采用ASCII码的编码方式，最高位补0来表示。

例如：`01000001`我们就是用`01000001`来表示，对于一个字节的字符，其实就是直接使用地址表示。

而对于n个字节的字符（n>1），即大于一个字节的字符，采用第一个字节前n位补1。第n+1位填0，后面字节的前两位一律设为10。剩下的没有提及的二进制位，全部为这个符号的unicode码。

例如：汉字`严`的Unicode码是4E25转换成二进制就是`01001110 00100101`共15位，根据上表可知使用UTF-8字符编码后占3个字节，因此前3位是1，第4位（n+1位）是0，后面两个字节中每个字节的前两位都是10,即`1110 xxxx 10 xxxxxx 10xxxxxx`。填充进去后就变成了`1110 0100 10 111000 10 100101`共计24位占3个字节。

由此可见，**英文在UTF-8字符编码后只占1个字节，中文占了3个字节。**

